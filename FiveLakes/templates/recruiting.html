{% extends 'templates/index.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block menu %}
<div class="collapse navbar-collapse" id="navbarResponsive">
    <ul class="navbar-nav ms-auto">
        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{% url 'states' %}">State Data</a></li>
        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded active" href="{% url 'recruiting' %}">Recruiting</a></li>
        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{% url 'onboarding' %}">Onboarding</a></li>
        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{% url 'attorneys' %}">Attorneys</a></li>
        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#reports">Reports</a></li>
    </ul>
</div>
{% endblock menu %}

{% block header %}
<header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">
        <!-- Masthead Heading-->
        <h4 class="masthead-heading text-uppercase mb-0">Recruiting</h4>
    </div>
</header>
{% endblock header %}

{% block content %}
    <div class="container">
        <a href="{% url 'add_applicant' %}">
            <button class="btn btn-secondary" type="submit"><i class="fa-duotone fa-plus" aria-hidden="true"></i>&nbsp;&nbsp;Add New Applicant</button>
        </a>
    </div>
    <br><br>
{#    <div class="container">#}
{#        <a href="{% url 'edit_applicant' %}">#}
{#            <button class="btn btn-secondary" type="submit">Edit Applicant</button>#}
{#        </a>#}
{#    </div>#}
    <br>

    <!-- Applicant List -->
    <div class="container">
        <h5><u>List of Applicants</u>&nbsp;(Click for Detail)</h5>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">State</th>
                    <th scope="col">Position</th>
                    <th scope="col">Full Name</th>
                    <th scope="col">Manager</th>
                    <th scope="col">Step</th>
                    <th class="text-center" scope="col">C.V.</th>
                    <th class="text-center" scope="col">Edit</th>
                    <th class="text-center" scope="col">Delete</th>
                </tr>
            </thead>
            <tbody>
                {% for applicant in applicant_list %}
                <tr>
                    <td>{{applicant.state_abbrev}}</td>
                    <td>{{applicant.position}}</td>
                    <td><h5><a href="applicant_detail/{{ applicant.id }}">{{ applicant.last_name}}, {{ applicant.first_name }} {{ applicant.middle_name }}</a></h5></td>
                    <td>{{ applicant.manager}}</td>
                    <td>Recruiting Step</td>
                    {%  if applicant.resume %}
                        <td class="text-center"><a href="{{ applicant.resume.url }}" target="_blank"><i class="fa-solid fa-file fa-lg"></i></td></a>
                    {%  else %}
                        <td class="text-center">N/A</td></a>
                    {%  endif %}
                    <td class="text-center"><a href="{% url 'edit_applicant' pk=applicant.id %}"><i class="fa-solid fa-pen-to-square fa-lg"></i></td> {# Edit #}
                    <td class="text-center"><a href="{% url 'applicant_delete' pk=applicant.id %}"><i class="fa-solid fa-trash fa-lg"></i></td> {# Delete #}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock content %}